---
import Contact from "../components/Contact.astro";
import About from "../components/Main/About.astro";
import FAQ from "../components/Main/FAQ.astro";
import Hero from "../components/Main/Hero.astro";
import Schedule, {
  getProgram,
} from "../components/Main/Schedule/Schedule.astro";
import Speakers from "../components/Main/Speakers/Speakers";
import Sponsors from "../components/Main/Sponsors.astro";
import { getLangFromUrl } from "../i18n/utils";
import Layout from "../layouts/Layout.astro";
import type { Speaker } from "../program/program";

const year = "2024";
const language = getLangFromUrl(Astro.url);
const program = await getProgram(year, language);

const speakers: Speaker[] = [];
for (const talk of program.schedule) {
  if (talk.speaker) {
    speakers.push(talk.speaker);
  }
}
---

<style>
  main {
    height: 100%;
    width: 100%;
    background-color: white;
  }
</style>

<Layout title="Bergen Open Source-konferanse">
  <main>
    <Hero year={year} language={language} />
    <About />
    <Speakers speakers={speakers} language={language} />
    <Schedule year={year} language={language} withTitle />
    <Sponsors sponsors={program.sponsors} />
    <FAQ language={language} />
    <Contact />
  </main>
</Layout>
